%
%
%/******************************************************************************
% *filename:		shejisilu.tex
% *author:  		synckey
% *version: 		v1.0
% *datetime:		2011-06-24 14:21:17
% *description:
% *****************************************************************************/
\section{设计思路及折衷} 
\subsection{TCP OR UDP?}
由于可以在一个请求中接受多个域名的查询，所以数据包可能会非常大。UDP缺乏流控制和
错误控制，在数据量比较小的时候使用UDP非常合适。我们一个请求和应答的数据包可
能达到几十K，考虑到客户端的网络流量，如果使用UDP，肯定会发生错误或丢包，在应用程
序中处理错误和重传会造成资源浪费，加重服务器的负担，也会造成网络的拥堵，同时也加
大了客户的响应时间。
\par{而在数据量比较小的时候，使用UDP就非常合适。所以我们初步设计为提供两个服务器
，一个UDP服务器，和一个TCP服务器。客户端根据它的报文大小来选择使用UDP还是TCP。}
\subsection{为什么是LIRS而不是LRU？}
根据资料显示，LIRS的效率比LRU高，但是实现的代价比LRU高不了多少，所以使用LIRS。
\subsection{为什么是字典树，而不使用HASH函数？} 
采用字典树与HASH函数相比，有以下几点优势：
\begin{asparaenum}[1.]
\item{可以利用字符串的公共前缀来节约存储空间。} 
\item{查找效率比HASH高\cite{DATA}}
\item{HASH可能产生碰撞} 
\end{asparaenum}
\subsection{为什么使用两个双数组字典树？}
字典树的查询效率非常高，但是动态构造构造的过程非常慢，需要做大量的内存拷贝。在设计中使用
两个双数组字典树。把访问频度最高的几百万（可配置的数目）个域名存放在文件中，在系
统启动时，从文件中读入域名信息，用于构造主字典树（在已知大小时，字典树构造速度非常
快，因为不需要内存的动态分配和拷贝操作）。在查询域名时，首先从主字典树中查询，如
果未命中，就把相应域名加入副字典树中（副字典树比较小，动态构造小的字典树代价很低）。
这种方式，既保留了字典树的较高的查询速率，又避免了动态构造很大的字典树带来的开销
。

%
%/*********************************  END OF section{设计思路及折衷}  *********************************/
